<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IQ Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }

        .dark-theme {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .dark-theme .container {
            background: rgba(52, 73, 94, 0.95);
            color: white;
        }

        .screen {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .screen.active {
            display: block;
            opacity: 1;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .dark-theme .subtitle {
            color: #bdc3c7;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .player-input {
            margin: 20px 0;
        }

        .player-input input {
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 50px;
            width: 300px;
            max-width: 100%;
            text-align: center;
            transition: all 0.3s ease;
        }

        .player-input input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .question-counter {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 20px;
        }

        .dark-theme .question-counter {
            color: #bdc3c7;
        }

        .timer {
            font-size: 2rem;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 20px;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .question {
            font-size: 1.4rem;
            margin-bottom: 30px;
            line-height: 1.6;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .dark-theme .option {
            background: #34495e;
            border-color: #2c3e50;
            color: white;
        }

        .option:hover {
            background: #e9ecef;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .dark-theme .option:hover {
            background: #2c3e50;
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .result-screen {
            text-align: center;
        }

        .score {
            font-size: 3rem;
            font-weight: bold;
            margin: 20px 0;
            color: #27ae60;
        }

        .iq-level {
            font-size: 1.5rem;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .dark-theme .stat {
            background: #34495e;
            border-color: #2c3e50;
            color: white;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .best-score {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .player-input input {
                width: 100%;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåô</button>
    
    <div class="container">
        <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="start-screen" class="screen active">
            <h1>üß† IQ Test</h1>
            <p class="subtitle">
                –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ç–µ—Å—Ç –Ω–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç!<br>
                –í–∞–º –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ 10 –≤–æ–ø—Ä–æ—Å–æ–≤ —Ä–∞–∑–ª–∏—á–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.<br>
                –ù–∞ –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å —É –≤–∞—Å –µ—Å—Ç—å 15 —Å–µ–∫—É–Ω–¥.<br>
                –ì–æ—Ç–æ–≤—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–π IQ?
            </p>
            
            <div class="player-input">
                <input type="text" id="player-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" maxlength="20">
            </div>
            
            <div id="best-score-display" class="best-score" style="display: none;">
                –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <span id="best-score-value"></span> –∏–∑ 10
            </div>
            
            <button class="btn" onclick="startGame()">üöÄ –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç</button>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
        <div id="game-screen" class="screen">
            <div class="question-counter">
                –í–æ–ø—Ä–æ—Å <span id="current-question">1</span> –∏–∑ <span id="total-questions">10</span>
            </div>
            
            <div class="timer" id="timer">15</div>
            
            <div class="question" id="question-text"></div>
            
            <div class="options" id="options-container"></div>
            
            <button class="btn" id="next-btn" onclick="nextQuestion()" style="display: none;">
                –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å ‚û°Ô∏è
            </button>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div id="result-screen" class="screen">
            <h1>üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞</h1>
            <p>–ü—Ä–∏–≤–µ—Ç, <span id="final-player-name"></span>!</p>
            
            <div class="score">
                <span id="final-score">0</span> –∏–∑ 10
            </div>
            
            <div class="iq-level" id="iq-level"></div>
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="accuracy">0%</div>
                    <div>–¢–æ—á–Ω–æ—Å—Ç—å</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="avg-time">0s</div>
                    <div>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è</div>
                </div>
            </div>
            
            <div id="new-best" class="best-score" style="display: none;">
                üèÜ –ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥!
            </div>
            
            <button class="btn" onclick="restartGame()">üîÑ –ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ</button>
            <button class="btn" onclick="goHome()">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let currentQuestionIndex = 0;
        let score = 0;
        let timer;
        let timeLeft = 15;
        let selectedAnswer = null;
        let playerName = '';
        let questionStartTime = 0;
        let totalTime = 0;
        let isDarkTheme = false;

        // –ë–∞–∑–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
        const questions = [
            {
                question: "–ö–∞–∫–æ–µ —á–∏—Å–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: 2, 6, 12, 20, 30, ?",
                options: ["42", "40", "38", "44"],
                answer: 0
            },
            {
                question: "–ï—Å–ª–∏ –≤—Å–µ —Ä–æ–∑—ã - —Ü–≤–µ—Ç—ã, –∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ü–≤–µ—Ç—ã - –∫—Ä–∞—Å–Ω—ã–µ, —Ç–æ:",
                options: ["–í—Å–µ —Ä–æ–∑—ã –∫—Ä–∞—Å–Ω—ã–µ", "–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–æ–∑—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∫—Ä–∞—Å–Ω—ã–º–∏", "–ù–∏–∫–∞–∫–∏–µ —Ä–æ–∑—ã –Ω–µ –∫—Ä–∞—Å–Ω—ã–µ", "–í—Å–µ –∫—Ä–∞—Å–Ω—ã–µ —Ü–≤–µ—Ç—ã - —Ä–æ–∑—ã"],
                answer: 1
            },
            {
                question: "–ß—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –¥–∞–Ω–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ‚óã ‚óê ‚óè ‚óë ?",
                options: ["‚óã", "‚óê", "‚óè", "‚óë"],
                answer: 0
            },
            {
                question: "–ö–Ω–∏–≥–∞ —Å—Ç–æ–∏—Ç 10 —Ä—É–±–ª–µ–π –ø–ª—é—Å –ø–æ–ª–æ–≤–∏–Ω–∞ –µ—ë —Ü–µ–Ω—ã. –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –∫–Ω–∏–≥–∞?",
                options: ["15 —Ä—É–±–ª–µ–π", "20 —Ä—É–±–ª–µ–π", "12 —Ä—É–±–ª–µ–π", "18 —Ä—É–±–ª–µ–π"],
                answer: 1
            },
            {
                question: "–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –æ—Å—Ç–∞–ª—å–Ω—ã–º?",
                options: ["–°–æ–±–∞–∫–∞", "–ö–æ—à–∫–∞", "–õ–æ—à–∞–¥—å", "–°—Ç–æ–ª"],
                answer: 3
            },
            {
                question: "–ï—Å–ª–∏ A = 1, B = 2, C = 3, —Ç–æ —á–µ–º—É —Ä–∞–≤–Ω–æ —Å–ª–æ–≤–æ '–ö–û–¢'?",
                options: ["33", "36", "39", "42"],
                answer: 2
            },
            {
                question: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ —Ä—è–¥: 1, 1, 2, 3, 5, 8, ?",
                options: ["11", "13", "15", "10"],
                answer: 1
            },
            {
                question: "–ö–∞–∫–∞—è —Ñ–∏–≥—É—Ä–∞ –ª–∏—à–Ω—è—è —Å—Ä–µ–¥–∏: —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫, –∫–≤–∞–¥—Ä–∞—Ç, –∫—Ä—É–≥, –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫?",
                options: ["–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫", "–ö–≤–∞–¥—Ä–∞—Ç", "–ö—Ä—É–≥", "–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫"],
                answer: 2
            },
            {
                question: "–ï—Å–ª–∏ –≤—á–µ—Ä–∞ –±—ã–ª–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, —Ç–æ –∫–∞–∫–æ–π –¥–µ–Ω—å –±—É–¥–µ—Ç –ø–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞?",
                options: ["–í—Ç–æ—Ä–Ω–∏–∫", "–°—Ä–µ–¥–∞", "–ß–µ—Ç–≤–µ—Ä–≥", "–ü—è—Ç–Ω–∏—Ü–∞"],
                answer: 1
            },
            {
                question: "–°–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤ –≤ –≥–æ–¥—É –∏–º–µ—é—Ç 28 –¥–Ω–µ–π?",
                options: ["1", "2", "11", "12"],
                answer: 3
            },
            {
                question: "–ß—Ç–æ —Ç—è–∂–µ–ª–µ–µ: –∫–∏–ª–æ–≥—Ä–∞–º–º –≤–∞—Ç—ã –∏–ª–∏ –∫–∏–ª–æ–≥—Ä–∞–º–º –∂–µ–ª–µ–∑–∞?",
                options: ["–í–∞—Ç–∞", "–ñ–µ–ª–µ–∑–æ", "–û–¥–∏–Ω–∞–∫–æ–≤–æ", "–ó–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Å–ª–æ–≤–∏–π"],
                answer: 2
            },
            {
                question: "–ó–∞–∫–æ–Ω—á–∏—Ç–µ –∞–Ω–∞–ª–æ–≥–∏—é: –¥–µ–Ω—å –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –Ω–æ—á–∏, –∫–∞–∫ –ª–µ—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫...",
                options: ["–í–µ—Å–Ω–µ", "–û—Å–µ–Ω–∏", "–ó–∏–º–µ", "–ì–æ–¥—É"],
                answer: 2
            },
            {
                question: "–ö–∞–∫–æ–µ —á–∏—Å–ª–æ –ø–æ–ª—É—á–∏—Ç—Å—è, –µ—Å–ª–∏ –ø–µ—Ä–µ–º–Ω–æ–∂–∏—Ç—å –≤—Å–µ —Ü–∏—Ñ—Ä—ã —á–∏—Å–ª–∞ 2468?",
                options: ["384", "396", "404", "368"],
                answer: 0
            },
            {
                question: "–£ –æ—Ç—Ü–∞ —à–µ—Å—Ç—å —Å—ã–Ω–æ–≤–µ–π. –ö–∞–∂–¥—ã–π —Å—ã–Ω –∏–º–µ–µ—Ç —Å–µ—Å—Ç—Ä—É. –°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –¥–µ—Ç–µ–π?",
                options: ["6", "7", "12", "13"],
                answer: 1
            },
            {
                question: "–ö–∞–∫–æ–µ –∏–∑ —á–∏—Å–µ–ª –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–≤–∞–¥—Ä–∞—Ç–æ–º —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞?",
                options: ["16", "25", "30", "36"],
                answer: 2
            }
        ];

        // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
        function getRandomQuestions() {
            const shuffled = shuffleArray(questions);
            return shuffled.slice(0, 10);
        }

        let gameQuestions = [];

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        function toggleTheme() {
            isDarkTheme = !isDarkTheme;
            document.body.classList.toggle('dark-theme');
            const themeBtn = document.querySelector('.theme-toggle');
            themeBtn.textContent = isDarkTheme ? '‚òÄÔ∏è' : 'üåô';
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        function loadBestScore() {
            const bestScore = localStorage.getItem('iq-test-best-score');
            if (bestScore) {
                document.getElementById('best-score-display').style.display = 'block';
                document.getElementById('best-score-value').textContent = bestScore;
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        function saveBestScore(score) {
            const currentBest = localStorage.getItem('iq-test-best-score') || 0;
            if (score > parseInt(currentBest)) {
                localStorage.setItem('iq-test-best-score', score);
                document.getElementById('new-best').style.display = 'block';
                return true;
            }
            return false;
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            setTimeout(() => {
                document.getElementById(screenId).classList.add('active');
                document.getElementById(screenId).classList.add('fade-in');
            }, 300);
        }

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        function startGame() {
            playerName = document.getElementById('player-name').value.trim() || '–ò–≥—Ä–æ–∫';
            gameQuestions = getRandomQuestions();
            currentQuestionIndex = 0;
            score = 0;
            totalTime = 0;
            
            showScreen('game-screen');
            loadQuestion();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
        function loadQuestion() {
            if (currentQuestionIndex >= gameQuestions.length) {
                endGame();
                return;
            }

            const question = gameQuestions[currentQuestionIndex];
            
            document.getElementById('current-question').textContent = currentQuestionIndex + 1;
            document.getElementById('total-questions').textContent = gameQuestions.length;
            document.getElementById('question-text').textContent = question.question;
            
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(optionElement);
            });

            selectedAnswer = null;
            document.getElementById('next-btn').style.display = 'none';
            
            // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
            timeLeft = 15;
            questionStartTime = Date.now();
            startTimer();
        }

        // –í—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–∞
        function selectAnswer(answerIndex) {
            if (selectedAnswer !== null) return;
            
            selectedAnswer = answerIndex;
            const options = document.querySelectorAll('.option');
            options[answerIndex].classList.add('selected');
            
            // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞
            clearInterval(timer);
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
            document.getElementById('next-btn').style.display = 'block';
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
            const currentQuestion = gameQuestions[currentQuestionIndex];
            if (selectedAnswer === currentQuestion.answer) {
                score++;
            }
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
            const responseTime = (Date.now() - questionStartTime) / 1000;
            totalTime += responseTime;
        }

        // –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        // –¢–∞–π–º–µ—Ä
        function startTimer() {
            const timerElement = document.getElementById('timer');
            
            timer = setInterval(() => {
                timerElement.textContent = timeLeft;
                
                if (timeLeft <= 5) {
                    timerElement.style.color = '#e74c3c';
                } else {
                    timerElement.style.color = '#27ae60';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –µ—Å–ª–∏ –≤—Ä–µ–º—è –≤—ã—à–ª–æ
                    if (selectedAnswer === null) {
                        totalTime += 15;
                        nextQuestion();
                    }
                } else {
                    timeLeft--;
                }
            }, 1000);
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
        function endGame() {
            showScreen('result-screen');
            
            document.getElementById('final-player-name').textContent = playerName;
            document.getElementById('final-score').textContent = score;
            
            const accuracy = Math.round((score / gameQuestions.length) * 100);
            document.getElementById('accuracy').textContent = accuracy + '%';
            
            const avgTime = Math.round(totalTime / gameQuestions.length * 10) / 10;
            document.getElementById('avg-time').textContent = avgTime + 's';
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è IQ
            let iqLevel = '';
            let iqColor = '';
            
            if (score >= 9) {
                iqLevel = 'üéñÔ∏è –ì–µ–Ω–∏–π! (IQ 140+)';
                iqColor = '#e74c3c';
            } else if (score >= 8) {
                iqLevel = 'üèÜ –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! (IQ 130+)';
                iqColor = '#e67e22';
            } else if (score >= 7) {
                iqLevel = '‚≠ê –í—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ (IQ 115+)';
                iqColor = '#f39c12';
            } else if (score >= 5) {
                iqLevel = 'üëç –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å (IQ 100+)';
                iqColor = '#27ae60';
            } else if (score >= 3) {
                iqLevel = 'üìö –ù–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ (IQ 85+)';
                iqColor = '#3498db';
            } else {
                iqLevel = 'üí™ –ù—É–∂–Ω–æ –ø–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è!';
                iqColor = '#9b59b6';
            }
            
            const iqElement = document.getElementById('iq-level');
            iqElement.textContent = iqLevel;
            iqElement.style.background = iqColor;
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            saveBestScore(score);
        }

        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function restartGame() {
            document.getElementById('new-best').style.display = 'none';
            startGame();
        }

        // –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é
        function goHome() {
            document.getElementById('new-best').style.display = 'none';
            showScreen('start-screen');
            loadBestScore();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            loadBestScore();
        };
    </script>
</body>
</html>

